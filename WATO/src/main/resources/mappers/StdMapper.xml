<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="com.king.myapp.mappers.StdMapper">
	
	<!-- 회원 가입 -->
	<insert id="std_join">
		insert into 
		std_info(Std_Profile, Std_Id, 
				 Std_Pwd, Std_Pwd_Qs, Std_Pwd_As, Std_Gender, 
				 Std_Phone1, Std_Phone2, Std_Phone3, 
				 Std_Email,
				 Std_Addr1, Std_Addr2, Std_Addr3)
		values (#{Std_Profile}, #{Std_Id}, 
				#{Std_Pwd}, #{Std_Pwd_Qs}, #{Std_Pwd_As}, #{Std_Gender}, 
				#{Std_Phone1}, #{Std_Phone2}, #{Std_Phone3}, 
				#{Std_Email}, 
				#{Std_Addr1}, #{Std_Addr2}, #{Std_Addr3})
	</insert>
	
	<!-- 아이디 중복확인 -->
	<select id="idChk" resultType="int">
		select count(*) from std_info
		where Std_Id = #{Std_Id}
	</select>
	
	<!-- 회원정보 수정 -->
	<update id="info_madofy">
		update std_info
		set
			Std_Pwd = #{Std_Pwd},
			Std_Pwd_Qs = #{Std_Pwd_Qs},
			Std_Pwd_As = #{Std_Pwd_As},
			Std_Phone1 = #{Std_Phone1},
			Std_Phone2 = #{Std_Phone2},
			Std_Phone3 = #{Std_Phone3},
			Std_Email = #{Std_Email},
			Std_Addr1 = #{Std_Addr1},
			Std_Addr2 = #{Std_Addr2},
			Std_Addr3 = #{Std_Addr3}
		where
			Std_Id = #{Std_Id}
	</update>
	
	<!-- 로그인 -> 개인정보수정에서 값을 다 가져와야 하기 때문에 select 에서 모든 컬럼명을 가져온 것임 -->
	<select id="login1" resultType="com.king.myapp.domain.StdVO">
		select Std_Id, Std_Pwd, Std_Pwd_Qs, Std_Pwd_As, Std_Gender, 
				 Std_Phone1, Std_Phone2, Std_Phone3, 
				 Std_Email,
				 Std_Addr1, Std_Addr2, Std_Addr3 
		from std_info
		where Std_Id = #{Std_Id} and Std_Pwd = #{Std_Pwd}
	</select>
	
	<!-- 로그인 -> 개인정보수정에서 값을 다 가져와야 하기 때문에 select 에서 모든 컬럼명을 가져온 것임 -->
	<select id="login2" resultType="com.king.myapp.domain.TeachVO">
		select Teach_Id, Teach_Pwd, Teach_Pwd_Qs, Teach_Pwd_As, Teach_Gender, 
				 Teach_Phone1, Teach_Phone2, Teach_Phone3, 
				 Teach_Email,
				 Teach_Addr1, Teach_Addr2, Teach_Addr3 
		from Teach_info
		where Teach_Id = #{Teach_Id} and Teach_Pwd = #{Teach_Pwd}
	</select>
	
  </mapper>	